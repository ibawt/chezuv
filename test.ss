;; -*- geiser-scheme-implementation: chez -*-
(import (chezscheme)
        (srfi s64 testing)
        (log)
        (utils)
        (openssl)
        (uv))

(define (my-simple-runner)
  (let ((runner (test-runner-null))
        (num-passed 0)
        (num-failed 0))
    (test-runner-on-test-end! runner
                              (lambda (runner)
                                (case (test-result-kind runner)
                                  ((pass xpass) (set! num-passed (+ num-passed 1)))
                                  ((fail xfail) (begin
                                                  (format #t "[FAILED] 狺蕲峻茴荇砒疱泗邃彳钴袅泗踽旌彳睥翦篝蝓铑弪珧秕瓠篝徙蝓铑弪翦篝蝈篚祠蝈蝓铑弪у疱泗邃鲠祯濠翦篝蝈篚祠蝈蝓铑弪п泗踽飙鲠祯濠┅箦簟铛憝驷殪邃ǐ铛憝驷殪邃暴┅ㄥ祗ｔ┅┅翦篝蝓铑弪镱骈钺臁蝓铑弪灬礅溽蝓铑弪ㄦ矧磲ｔ⑿狍箝铉翦篝蠛洚テ衢扉铉翦篝蠛洚ア铛憝疳篌邃铛憝驷殪邃麒孱痫箝糸鲥铛憝驷殪邃ㄥ轸暴┅蝓铑弪┅翦篝蝓铑弪驷泗矧睐箝眇戾蝓铑弪翦篝忮玳汨妃貊ㄤ彐轭翦篝疱ㄣ犰飙鏖翳轭瘐舡骈戾㈡轼趱蝈蟑铉轭沐螋疱恝灬礅溽皓戾祜镳ㄛ扉铄ㄧ弭扉铄皓垓弩蹯Ж┹ㄩㄥ镦镡赍泗扉铄ㄡ痧禊篝蜷铉狃疱钿蝈鲥蝮蝈篚祠┅祜镳ㄧ弭扉铄皓ㄣ镱ㄦ矧磲ｆ彳睥扉铄蝈篚祠┅┅┅ㄤ彐轭瀛簌铘狲轸簌铘狲蝓戾īè怙澌ㄤ钺黹悱鏖钿灬礅溽ī翦篝忮玳螬灬礅溽ī怙澌灬礅溽ī翦篝孱螬┅┅ㄤ彐轭瀛簌铘狲溴筱蜷忮簌铘狲蝓戾īè怙澌翦篝珧秕怙澌┅┅ㄤ彐轭瀛簌铘狲鏖翳铉轭簌铘狲蝓戾īè怙澌ㄤ钺黹悱鏖钿灬礅溽ī簌篝屙㈩玳铠铉轭泔铈骈趱蝈蟑铉轭溴霪铛祆簿Ρ箪邋磲脲糸礤糸礤漉蜥糸镱蛋鞍鞍暴┅灬礅溽ī怙澌灬礅溽ī簌篝屙㈩玳铠铉轭泔铈聃轸骈趱蝈蟑铉轭警溴霪铛祆簿Ρ┅┅┅ㄤ彐轭梏麴翦篝蝈聃弩灬礅溽躜飙篝蜷铉戾ㄛ躜貊篝蜷铉觉蜢躜飙篝蜷铉┹ㄣ犰殳沣灬礅溽氅貊汜祆鏖翳祜镳灬礅溽祜镳戾舣狍钽ㄛ蝈箴辑貊磲脲梏麴蝈聃弩祜镳躜飑┹蝈箴┅┅┅┅ㄤ彐轭梏麴蟓翦篝蝈聃弩灬礅溽躜飙篝蜷铉沐螋戾ㄛ躜貊篝蜷铉觉蜢躜飙篝蜷铉┹ㄣ犰殳沣灬礅溽氅篌殳汜祆鏖翳泔铘屮沐螋ｆｔ灬礅溽ㄣ豇貊汜祆鏖翳祜镳灬礅溽祜镳戾舣狍钽ㄛ蝈箴辑貊磲脲梏麴蟓蝈聃弩祜镳泗躜飑┹蝈箴┅┅┅┅┅ㄤ彐轭蝓瞽泔眄犷灬礅溽ㄣ礓ㄦ矧磲ｔⅡ躅泔眄犷淇戾ㄛ痨轶痱镢弩沩洎荸戾祜镳ㄛ扉铄Ж┹垤轭ㄧ弭扉铄ㄣ狎痨轶舂┹ㄦ矧磲ｔ㈧轭搴狺ア扉铄ㄩㄥ镦镡赍泗扉铄ㄡ痧禊篝蜷铉狃疱钿蝈鲥蝮扉铄螬祜镳ㄣ镱扉铄扉铄螬ㄧ弭扉铄ㄣ狎痨轶舂┅┅┅ㄤ彐轭沲蜢翦篝蝈聃弩灬礅溽躜飑篝蜷铉绢蹴忮蝓瞽泔眄犷ㄦ矧磲ｆ沲蜢箝戾铘黩轸瀛秕堍梏麴咩镤妪堍幄躜飑┅┅换ㄤ弩泸殁Ⅲ弪鲩铉梏麴换ㄩⅢ栾蹯箦蝣箝眇戾梏麴蝈聃弩趔换戾ㄛ蝈箴换ㄣ犰殳沣换灬礅溽氅换貊汜祆鏖翳祜镳换灬礅溽祜镳换貊翥瓠扉篝孱祜镳⒈卜爱爱焙副副换灬礅溽篝狒躞箦蝣弪沆殄铘换貊箦蝣瀛梏麴沆殄铘灬礅溽篝狒躞换貊沆矬瀛篝蝈犴沆殄铘┅┅换戾舣狍钽ㄛ蝈箴辑貊磲脲梏麴蝈聃弩祜镳貊篝蜷铉觉蜢㈣趑鸷祜汜扈矬艉副副┅┹换蝈箴┅┅┅荸换翦篝羼踽舶ㄣ徜狎蝈箴┅┅ㄤ弩泸殁Ⅲ弪鲩铉梏麴螈ㄩⅢ栾蹯箦蝣箝眇戾梏麴蝈聃弩簪戾ㄛ蝈箴ㄣ犰殳沣灬礅溽氅貊汜祆鏖翳祜镳灬礅溽祜镳篌殳汜祆鏖翳泔铘屮骈趱蝈蟑铉轭沐螋疱恝骈趱蝈蟑铉轭脲疱恝ｆ灬礅溽ㄣ豇貊翥瓠扉篝孱祜镳⒈卜爱爱焙贡贡灬礅溽篝狒躞箦蝣弪沆殄铘貊箦蝣瀛梏麴泗沆殄铘灬礅溽篝狒躞ｆ换貊沆矬瀛篝蝈犴沆殄铘┅┅┅篌殳汜祆鏖翳泔铘屮骈趱蝈蟑铉轭沐螋疱恝ｆｔ灬礅溽ㄣ豇è貊磲脲梏麴蟓蝈聃弩祜镳泗貊篝蜷铉觉蜢㈣趑痼函祜汜扈矬艉贡贡┅灬礅溽ㄢ灬瑭忪徼┅┅┅┅┹翦篝羼踽舶ㄣ徜狎蝈箴┅┅换ㄤ弩泸殁㈣趑蝈聃弩趔换鏖翳铉轭换ㄩⅢ栾蹯磲脲箝眇戾梏麴蝈聃弩簪换戾è蝈箴ㄨ趑瓠翦篝蝈聃弩㈣趑鸷祜汜扈矬艉赴赴┅换翦篝羼踽舶ㄣ徜狎蝈箴┅┅换ㄩⅢ栾蹯磲脲箝眇戾梏麴蝈聃弩鲥蜷骈邃换戾ㄛ蝈箴ㄨ趑痼翦篝蝈聃弩㈣趑痼函祜汜扈矬艉拱拱骈趱蝈蟑铉轭沐螋疱恝┹换翦篝羼踽舶ㄣ徜狎蝈箴┅┅换ㄩⅢ栾蹯驷殪鏖翳铒鲥蜷骈邃沐螋换翦篝弪蝻ｔㄨ趑痼翦篝蝈聃弩㈣趑痼函祜汜扈矬艉拱拱ｆ┅┅ㄤ弩泸殁Ⅴ蜢骢钽糸镱螈ㄩⅢ栾蹯疳蝮箝眇戾躜膦戾ㄛ躜貊篝蜷铉觉蜢㈣趑鸷顼镧戾汜┹翦篝羼踽㈢镲珈瀹汜貊躜飙栾篝躜飑翦篝羼赴貊躜飙痫螋躜飑翦篝羼踽貊躜飙疳翳躜飑┅ㄩⅢ栾蹯疳蝮泔眇戾躜膦戾ㄛ躜貊篝蜷铉觉蜢㈣趑痼函顼镧戾汜焊案隘骘锆忉颌┹翦篝羼踽㈢镲珈瀹汜貊躜飙栾篝躜飑翦篝羼踽ц趑痼貊躜飙痱雉镢镬躜飑翦篝羼赴赴貊躜飙痫螋躜飑翦篝羼踽骘锆忉颌貊躜飙疳翳躜飑┅┅ㄤ弩泸殁Ⅲ趄轭绛箴扉簪ㄩⅢ栾蹯箴扉镱溴扉黹翦颌戾ㄛ箴扉趔篝蜷铉箴扉爱爱爱昂闯闯＼憨荸翦篝羼踽Ж爱爱爱阿⒋炒尝箴扉趔┅┅翦篝孱汨妃貊